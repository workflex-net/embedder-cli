// Category: tools/lsp
// Modules: 1
// Total size: 2,234 chars


// === Module: B6B (offset: 0xca9d0a, 2,234 chars) ===
var B6B=z(()=>{rC();mO();qI();wC();gHE=["goToDefinition","findReferences","hover","documentSymbol","workspaceSymbol","goToImplementation","prepareCallHierarchy","incomingCalls","outgoingCalls"],A6B=dE({metadata:{name:"lsp",displayName:"LSP",description:EHE,category:"search",requiresConfirmation:!1,isAvailable:()=>sC.isAvailable()},inputSchema:S.object({operation:S.enum(gHE).describe("The LSP operation to perform"),path:S.string().describe("The absolute or relative path to the file"),line:S.number().int().min(1).describe("The line number (1-based, as shown in editors)"),character:S.number().int().min(1).describe("The character offset (1-based, as shown in editors)")}),getDescription:({operation:A,path:B,line:Q,character:E})=>{let g=Uu.basename(B);return`${A} at ${g}:${Q}:${E}`},getLocations:({path:A})=>[{path:A,type:"read"}],execute:async({operation:A,path:B,line:Q,character:E},g)=>{try{let C=Uu.isAbsolute(B)?B:Uu.join(g.projectRoot,B),I=Uu.relative(g.projectRoot,C),w=`${A} ${I}:${Q}:${E}`;if(!await Bun.file(C).exists())return{success:!1,llmContent:`File not found: ${C}`,summary:"File not found"};if(!await sC.hasClients(C))return{success:!1,llmContent:"No LSP server available for this file type. LSP servers are configured for C/C++ and Rust files.",summary:"No LSP server available"};await sC.touchFile(C,!0);let L={file:C,line:Q-1,character:E-1},R=QHE(C).href,U=await CHE(A,L,R),G=uKA(U);return{success:!0,llmContent:U.length===0?`No results found for ${A}`:JSON.stringify(G,null,2),summary:w,returnDisplay:U.length===0?"No results":`${U.length} result${U.length===1?"":"s"}`,metadata:{result:U},locations:[{path:C,type:"read"}]}}catch(C){return{success:!1,llmContent:`LSP operation failed: ${uQ(C)}`,summary:"LSP operation failed"}}}})});function DHE(A){let Q=A.trim(),E=Q.match(/^(\w+=\S+\s+)+(.+)$/);if(E?.[2])Q=E[2];return Q.match(/^([^\s;&|]+)/)?.[1]??""}function MHE(A){return/[;&|]/.test(A)||/\$\(/.test(A)||/`/.test(A)}function E6B(A){let B=A.trim();if(!B)return!0;if(MHE(B))return B.split(/\s*[;&|]+\s*|\s*\$\(|\)\s*|`/).every((E)=>{let g=E.trim();if(!g)return!0;return Q6B(g)});return Q6B(B)}function Q6B(A){for(let Q of wHE)if(Q.test(A))return!0;let B=DHE(A);if(IHE.has(B))return!0;return!1}var IHE,wHE;
