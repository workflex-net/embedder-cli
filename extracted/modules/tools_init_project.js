// Category: tools/init_project
// Modules: 1
// Total size: 10,749 chars


// === Module: Z7 (offset: 0xc3190c, 10,749 chars) ===
var Z7=z(()=>{rC();fw();qI();wC();$xB=dE({metadata:{name:"init_project",displayName:"Initialize Project",description:`Initialize the project by creating or improving an EMBEDDER.md file with project context.

This tool analyzes the codebase and creates a comprehensive EMBEDDER.md file containing:
- Project overview (name, MCU, board, toolchain)
- Build and flash commands
- Debug configuration
- Serial monitor settings
- Code style guidelines

Use this when setting up a new project or when the user asks to initialize/create EMBEDDER.md.

After calling this tool, you must:
1. Analyze the codebase structure
2. Create/update EMBEDDER.md using the writeFile tool
3. Follow the format specified in the initialization prompt`,category:"system",requiresConfirmation:!1},inputSchema:S.object({}),getDescription:()=>"Initializing project with EMBEDDER.md",getLocations:()=>[{path:"EMBEDDER.md",type:"write"}],execute:async()=>{try{let A=yB.getState().initHandler;if(!A)return{success:!1,llmContent:"Init handler not available. UI integration required.",summary:"Cannot initialize project"};let B=await A();if(B.success)return{success:!0,summary:"Ready to initialize",llmContent:`${txB}

Please now analyze the codebase and create the EMBEDDER.md file following the format above. Use the writeFile tool to create the file.`};return{success:!1,llmContent:`Initialization failed: ${B.error||"Unknown error"}`,summary:"Initialization failed"}}catch(A){return{success:!1,llmContent:`Error initializing project: ${uQ(A)}`,summary:"Initialization error"}}}})});function mxB(A){let{switchMode:B,setMode:Q,setAppStatus:E,logout:g,availableModels:C,selectedModel:I,callCallback:w,teams:D,clearTeamSelection:H,clearProjectSelection:L,conversationCount:R,messageCount:U,todoCount:G,selectedProject:Y,selectedTeam:J,apiFetch:c,availableThemes:h,setTheme:V,showToast:T,sessionId:k,userId:q}=A;return[{name:"clear",description:`Clear conversation history - ${nM}+R`,aliases:["reset","new"],shortcut:{key:"r",ctrl:!0},action:async()=>{await w("cancelStream"),await w("clearMessages")}},{name:"serial",description:`Toggle serial terminal sidebar - ${nM}+\``,shortcut:{key:"`",ctrl:!0},action:async()=>{await w("toggleSerialSidebar")}},{name:"model",description:I?`Switch AI model (${I.displayName||I.name})`:"Switch AI model",shortcut:{key:"b",ctrl:!0,alt:!0},hidden:C.length<=1,action:async()=>{await w("showModelSelector")}},{name:"console",description:"Open web console",action:()=>{P4(OC.webUrl)}},{name:"billing",description:"Open billing portal",action:async()=>{try{let s=await c.post("api/v1/users/me/billing/portal-sessions");P4(s.portalUrl)}catch{P4(`${OC.webUrl}/subscribe`)}}},{name:"logs",description:"Open logs folder",action:()=>{P4(ib())}},{name:"toggle-mode",description:"Toggle between plan/act mode",shortcut:{key:"tab",shift:!0,requireNoFocus:!0},hidden:!0,action:B},{name:"plan",description:"Switch to plan mode",action:()=>{Q("plan")}},{name:"act",description:"Switch to act mode",action:()=>{Q("act")}},{name:"team",description:"Switch team and project",aliases:["switch-team","switch"],hidden:D.length<=1,action:H},{name:"project",description:"Switch project",aliases:["switch-project"],action:L},{name:"peripheral",description:"Add peripherals to current project",aliases:["peripherals","add-peripheral"],hidden:!Y,action:async()=>{if(!Y){fA.warn("No project selected. Use /project first.");return}await w("showPeripheralSelector")}},{name:"history",description:"View conversation history",aliases:["resume","conversations"],hidden:R<1,action:async()=>{await w("showHistorySelector")}},{name:"logout",description:"Sign out and return to login",aliases:["signout"],action:async()=>{fJB()?.().catch(()=>{}),await g()}},{name:"exit",description:"Exit the application",aliases:["quit","q"],action:VF},{name:"compress",description:"Compress conversation history to save context",aliases:["summarize"],action:async()=>{await dxB("user requested")}},{name:"init",description:"Create EMBEDDER.md with project contexts",action:async()=>{await lxB()}},{name:"tasks",description:"View current session task list",aliases:["todos","plan"],hidden:G<1,action:async()=>{await w("showTasksView")}},{name:"rewind",description:`Rewind to a previous state - ${nM}+Z (2x)`,hidden:U<1,action:async()=>{await w("showRewindInterface")}},{name:"undo",description:`Undo the last message - ${nM}+Z`,hidden:U<1,action:async()=>{await w("undoLastMessage")}},{name:"theme",description:"Change color theme",aliases:["t"],acceptsArgs:!0,action:async(s)=>{if(!s?.trim()){await w("showThemeSelector");return}let j=s.trim().toLowerCase(),i=h.find((d)=>d.toLowerCase()===j);if(i)V(i)}},{name:"help",description:"Show documentation and commands",aliases:["h","?"],action:async()=>{await w("showHelpPanel")}},{name:"keybindings",description:"Change keybinding mode (emacs/vim)",aliases:["keys","kb"],action:async()=>{await w("showKeybindingSelector")}},{name:"bug",description:"Report a bug",aliases:["report","issue"],acceptsArgs:!0,requiresArgs:!0,argsHint:"describe the issue",action:async(s)=>{let j=s?.trim();if(!j){T({title:"Description Required",message:"Usage: /bug <description>",variant:"warning",duration:3000});return}T({message:"Submitting bug report...",variant:"info",duration:1e4});try{let i=iZ()||void 0,d=await NxB({sentryEventId:i,sessionId:k??void 0,userId:q??void 0,teamId:J?.id,projectId:Y?.id}),l=await TxB(j,d,c);if(l.success){if(T({title:"Bug Report Submitted",message:l.issueUrl?"Opening issue...":"Thank you for your feedback!",variant:"success",duration:3000}),l.issueUrl)P4(l.issueUrl)}else fA.error("Bug report submission failed",{error:l.error}),T({title:"Submission Failed",message:"Failed to send report. Please try again.",variant:"error",duration:4000})}catch(i){fA.error("Bug report submission failed",{error:i}),T({title:"Submission Failed",message:"Failed to send report. Please try again.",variant:"error",duration:4000})}}},{name:"welcome",description:"Show the welcome animation",action:()=>{E("welcome")}},{name:"lipsum",description:"Fill chat with test conversation data",hidden:!0,action:async()=>{await w("loadLipsum")}}]}var nxB=z(async()=>{JM();O4();qJ();oF();ZE();yxB();V7();Z7();await V4()});function rO(A){let B=new Date(A),E=new Date().getTime()-A,g=Math.floor(E/86400000);if(g===0)return B.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});else if(g===1)return"Yesterday";else if(g<7)return`${g} days ago`;return B.toLocaleDateString()}function pxB(A){let Q=Date.now()-A,E=new Date(A),g=Math.floor(Q/1000),C=Math.floor(g/60),I=Math.floor(C/60);if(g<60)return"just now";else if(C<60)return`${C}m ago`;else if(I<24)return`${I}h ago`;return E.toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function rxB(A){if(A<1024)return`${A}B`;if(A<1048576)return`${(A/1024).toFixed(1)}KB`;if(A<1073741824)return`${(A/1048576).toFixed(1)}MB`;return`${(A/1073741824).toFixed(1)}GB`}function TL(A,B){if(A.length<=B)return A;return`${A.slice(0,B-3)}...`}function G$Q(){return`conv_${Date.now()}_${Math.random().toString(36).slice(2,9)}`}function R$Q(A){let B=A.find((Q)=>Q.role==="user"&&!(("hidden"in Q)&&Q.hidden));if(!B||B.role!=="user")return"New conversation";return TL(B.content,60)}function K$Q(A){let B=A.filter((Q)=>Q.role==="user"&&!(("hidden"in Q)&&Q.hidden)).slice(0,3);if(B.length===0)return"New conversation";return B.map((Q,E)=>`${E+1}. ${TL(Q.content,50)}`).join(`
`)}function Y$Q(A){return A.map((B)=>{if(B.role==="tool-group")return{id:B.id,role:B.role,toolGroup:{id:B.toolGroup.id,status:B.toolGroup.status,tools:B.toolGroup.tools.map((Q)=>({id:Q.id,toolCallId:Q.toolCallId,toolName:Q.toolName,displayName:Q.displayName,status:Q.status,args:Q.args,result:Q.result?{success:Q.result.success,llmContent:Q.result.llmContent,summary:Q.result.summary,diffData:Q.result.diffData}:void 0}))},timestamp:B.timestamp,..."displayOnly"in B&&B.displayOnly?{displayOnly:B.displayOnly}:{}};return{id:B.id,role:B.role,content:B.content,timestamp:B.timestamp,..."hidden"in B&&B.hidden?{hidden:B.hidden}:{},..."displayOnly"in B&&B.displayOnly?{displayOnly:B.displayOnly}:{},..."summary"in B&&B.summary?{summary:B.summary}:{}}})}function pUA(A){return A.map((B)=>{if(B.role==="tool-group"&&B.toolGroup){let Q={id:B.toolGroup.id,status:B.toolGroup.status,tools:B.toolGroup.tools.map((E)=>({id:E.id,toolCallId:E.toolCallId,toolName:E.toolName,displayName:E.displayName,status:E.status,args:E.args,result:E.result,startTime:B.timestamp,endTime:B.timestamp})),startTime:B.timestamp,endTime:B.timestamp};return{id:B.id,role:"tool-group",toolGroup:Q,timestamp:B.timestamp,..."displayOnly"in B&&B.displayOnly?{displayOnly:B.displayOnly}:{}}}return{id:B.id,role:B.role,content:B.content||"",timestamp:B.timestamp,..."hidden"in B&&B.hidden?{hidden:B.hidden}:{},..."displayOnly"in B&&B.displayOnly?{displayOnly:B.displayOnly}:{},..."summary"in B&&B.summary?{summary:B.summary}:{}}})}async function QfB(){return await SLA(AfB)??{conversations:[]}}async function J$Q(A){await JLA(exB),await xLA(AfB,A)}async function S$Q(A,B){let Q=await QfB(),E=Q.conversations.findIndex((I)=>I.id===A.id),g=A.messages.filter((I)=>I.role==="user"&&!(("hidden"in I)&&I.hidden)).length,C={id:A.id,projectId:A.projectId,teamId:A.teamId,title:A.title,summary:B,updatedAt:A.updatedAt,messageCount:A.messages.length,threadCount:g};if(E>=0)Q.conversations[E]=C;else Q.conversations.push(C);Q.conversations.sort((I,w)=>w.updatedAt-I.updatedAt),await J$Q(Q)}async function rUA(A,B,Q,E,g,C){await JLA(exB);let I=E||G$Q(),w=Date.now(),D=w;if(E){let R=await q7(E);if(R)D=R.createdAt}let H={id:I,projectId:B,teamId:Q,createdAt:D,updatedAt:w,title:R$Q(A),messages:Y$Q(A),todos:g},L=C||K$Q(A);return await xLA(BfB(I),H),await S$Q(H,L),I}async function q7(A){return SLA(BfB(A))}async function EfB(A){let B=await q7(A);if(!B)return null;return{messages:pUA(B.messages),todos:B.todos}}async function W7(A,B){return(await QfB()).conversations.filter((E)=>E.projectId===A&&E.teamId===B)}function gfB(A){let B=[],Q=null,E=0;for(let g of A)if(g.role==="user"){if("hidden"in g&&g.hidden)continue;if(Q)Q.messageCount=E,B.push(Q);Q={index:B.length,userMessageId:g.id,summary:TL(g.content,60),messageCount:1,timestamp:g.timestamp},E=1}else if(Q)E++;if(Q)Q.messageCount=E,B.push(Q);return B}async function CfB(A,B){let Q=await q7(A);if(!Q)return null;let E=pUA(Q.messages),g=gfB(E);if(B<0||B>=g.length)return{messages:E,todos:Q.todos};if(!g[B])return{messages:E,todos:Q.todos};let I=g[B+1],w=E.length;if(I){if(w=E.findIndex((D)=>D.id===I.userMessageId),w===-1)w=E.length}return{messages:E.slice(0,w),todos:Q.todos}}async function IfB(A){let B=await q7(A);if(!B)return[];let Q=pUA(B.messages);return gfB(Q)}var exB,AfB,BfB=(A)=>kL("conversations",`${A}.json`);
