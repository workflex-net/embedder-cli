// Category: tools/webSearch
// Modules: 1
// Total size: 2,438 chars


// === Module: wZB (offset: 0xc9b512, 2,438 chars) ===
var wZB=z(()=>{rC();qI();wC();IZB=dE({metadata:{name:"webSearch",displayName:"Web Search",description:wME(),category:"search",requiresConfirmation:!1},inputSchema:S.object({query:S.string().min(1).describe("The web search query."),numResults:S.number().int().min(1).max(20).optional().describe(`Number of search results to return (default: ${Du}, max: 20).`),livecrawl:S.enum(["fallback","preferred"]).optional().describe("Live crawl mode - 'fallback': use live crawling as backup if cached content unavailable (default), 'preferred': prioritize live crawling."),type:S.enum(["auto","fast","deep"]).optional().describe("Search type - 'auto': balanced search (default), 'fast': quick results, 'deep': comprehensive search."),contextMaxCharacters:S.number().int().min(1000).max(50000).optional().describe(`Maximum characters for context string optimized for LLMs (default: ${WKA}).`)}),validateParams:({query:A})=>{if(!A?.trim())return"Query cannot be empty";return null},getDescription:({query:A})=>`Searching the web for "${A}"`,getLocations:()=>[],execute:async({query:A,numResults:B,livecrawl:Q,type:E,contextMaxCharacters:g},C)=>{if(!C.apiFetch)return{success:!1,llmContent:"API not available. Please authenticate first.",returnDisplay:"Authentication required"};try{let I=await C.apiFetch.post("api/v1/proxy/web-search",{query:A,numResults:B??Du,livecrawl:Q??"fallback",type:E??"auto",contextMaxCharacters:g??WKA});if(!I.response)return{success:!1,llmContent:"No results returned from web search.",returnDisplay:"No results"};let w=I.resultCount??B??Du;return{success:!0,llmContent:I.response,returnDisplay:`Web search results for "${A}"`,summary:`Found ${w} results for "${A}"`,metadata:{query:A,numResults:B??Du,livecrawl:Q??"fallback",type:E??"auto",contextMaxCharacters:g??WKA,responseLength:I.response.length}}}catch(I){let w=uQ(I);return{success:!1,llmContent:`Web search failed: ${w}`,returnDisplay:`Error: ${w}`}}}})});import{mkdir as DME}from"fs/promises";import{join as DZB}from"path";function MZB(A){return DZB(A,".embedder","plans")}function aU(A,B,Q){let E=MZB(A);return DZB(E,`${Q}-${B}.md`)}async function HZB(A){await DME(MZB(A),{recursive:!0})}var ZN=()=>{};function LZB(A,B){if(B==="act")return!0;return FZB.has(A)}function Cz(A,B,Q,E){if(B==="act")return!0;if(A==="writeFile"||A==="editFile"){if(!Q||!E)return!1;let g=aU(E.projectRoot,E.sessionSlug,E.createdAt);return Q===g}if(FZB.has(A))return!0;return!1}var FZB;
